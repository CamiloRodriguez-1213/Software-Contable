{% extends 'base.html' %}

{% block contenido %}
<div class="container-fluid">
    <div class="row">
        <div class="col col-2 p-2">
            <div class="row">
                <div class="col">
                    <div class="input-group p-1">
                      <div class="input-group-text" style="width: 55%;">ID venta</div>
                      <input type="text" class="form-control" disabled>
                    </div>
                </div>
            </div>
        </div>
        <div class="col col-2 p-2">
            <div class="row">
                <div class="col">
                    <div class="input-group p-1">
                        <div class="input-group-text" style="width: 55%;">Fecha Registro</div>
                        <input type="text" class="form-control" disabled>
                      </div>
                </div>
            </div>
        </div>
        <div class="col col-2 p-2">
            <div class="row">
                <div class="col">
                    <div class="input-group p-1">
                        <div class="input-group-text" style="width: 30%;">Asesor</div>
                        <input type="text" class="form-control" value="{{session['user']}}" disabled>
                      </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col col-3 p-2">
            <div class="row">
                <div class="col">
                    <form action="{{url_for('postIndex')}}" method="POST">
                    <div class="input-group p-1">
                        <div class="input-group-text" style="width: 20%;">Código</div>
                            <input type="search" class="form-control" name="search"/>
                            <input type="submit" class="btn btn-outline-dark" id="query" name="query" value="Buscar">
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <div class="col col-12">
            <table id='empTable' class='table display dataTable bg-dark text-light' width='100%'>
                <thead class="thead-dark">
                <tr>
                    <th>ID</th>
                    <th>Código</th>
                    <th>Nombre</th>
                    <th>Existencia</th>
                    <th>P Unitario</th>
                    <th>Cantidad</th>
                    <th>Subtotal</th>
                </tr>
                </thead>
                <tbody>
                    
                    {% if datos %}
                        {% for dato in datos %}
                        {{dato[1]}}
                            <tr>
                                <td><input type="text" value="{{dato['id_producto']}}" disabled name ="id"></td>
                                <td><input type="text" value="{{dato['codigo_producto']}}" disabled name ="codigo"></td>
                                <td><input type="text" value="{{dato['nombre']}}" disabled name="nombre"></td>
                                <td><input type="text" value="{{dato['existencia']}}" disabled name ="existencia"></td>
                                <td><input type="text" value="{{dato['precio_venta']}}" disabled name ="valor"></td>                        
                                <td><input type="text" value="1" id="cantidad"></td>
                                <td><input type="text" value="" disabled id="subtotal"></td>
                                
                            </tr>
                        {% endfor %}
                    {% endif %}
                    <tr>
                        
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td><div class="input-group-text">Subtotal</div></td>
                            
                            <td >
                                <input class="py-1" type="text" id="total"/>
                            </td>
                        
                    </tr>
                </tbody>
                
            </table>
        
        </div>
   </div>
</div>
{% endblock %}
{% block scripts %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js" crossorigin="anonymous"></script>
<script>
$( document ).ready(function() {
    var id = document.getElementsByName("id")
    var codigo = document.getElementsByName("codigo")
    var nombre = document.getElementsByName("nombre")
    var existencia = document.getElementsByName("existencia")
    var valor = document.getElementsByName("valor")
    var cantidad = document.getElementsByName("cantidad")
    var subtotal = document.getElementsByName("subtotal")
    var total = document.getElementsByName("total")
    total.value = leerCookie('subtotal');
    $(document).on("change", "#cantidad", function () {
        
    });
});
function leerCookie(nombre) {
    var lista = document.cookie.split(";");
    for (i in lista) {
        var busca = lista[i].search(nombre);
        if (busca > -1) {micookie=lista[i]}
        }
    var igual = micookie.indexOf("=");
    var valor = micookie.substring(igual+1);
    return valor;
    }
</script>
{% endblock %}
